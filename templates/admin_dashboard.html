{% extends "base.html" %}
{% block title %}پنل مدیریت | XMonitor{% endblock %}
{% block content %}
<div class="admin-dashboard">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-4">
        <div>
            <h1 class="h3 mb-1 text-white d-flex align-items-center gap-2">
                <i class="fas fa-cogs text-primary"></i>
                پنل مدیریت
            </h1>
            <p class="text-muted mb-0 small">
                تصویر کلی از وضعیت سرورها، کاربران و لایسنس شما
            </p>
        </div>
        <div class="license-pill d-flex flex-column flex-sm-row align-items-sm-center gap-2 px-3 py-2 rounded-3">
            <div class="d-flex align-items-center gap-2">
                <span class="badge rounded-pill {% if is_trial %}bg-warning-subtle text-warning{% else %}bg-success-subtle text-success{% endif %}">
                    <i class="fas fa-key me-1"></i>
                    {{ "نسخه آزمایشی" if is_trial else "لایسنس فعال" }}
                </span>
                <span class="separator d-none d-sm-inline">•</span>
            </div>
            <div class="time-remaining small text-light">
                مانده:
                <strong>
                    {{ time_left.days }} روز
                    {{ time_left.hours }} ساعت
                    {{ time_left.minutes }} دقیقه
                </strong>
            </div>
        </div>
    </div>

    <div class="row g-3 mb-4">
        <div class="col-6 col-lg-3">
            <div class="card stat-card border-0 h-100">
                <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="stat-label text-muted small">کل سرورها</span>
                        <span class="stat-icon bg-primary-subtle text-primary">
                            <i class="fas fa-server"></i>
                        </span>
                    </div>
                    <div class="stat-value text-white fs-3 fw-semibold">{{ total_servers }}</div>
                    <div class="mt-auto small text-muted">همه سرورهای ثبت‌شده</div>
                </div>
            </div>
        </div>
        <div class="col-6 col-lg-3">
            <div class="card stat-card border-0 h-100">
                <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="stat-label text-muted small">سرورهای فعال</span>
                        <span class="stat-icon bg-success-subtle text-success">
                            <i class="fas fa-signal"></i>
                        </span>
                    </div>
                    <div class="stat-value text-white fs-3 fw-semibold">{{ active_servers }}</div>
                    <div class="mt-auto small text-muted">سرورهایی که در حال مانیتور هستند</div>
                </div>
            </div>
        </div>
        <div class="col-6 col-lg-3">
            <div class="card stat-card border-0 h-100">
                <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="stat-label text-muted small">کل کاربران</span>
                        <span class="stat-icon bg-info-subtle text-info">
                            <i class="fas fa-users"></i>
                        </span>
                    </div>
                    <div class="stat-value text-white fs-3 fw-semibold">{{ total_users }}</div>
                    <div class="mt-auto small text-muted">تمام حساب‌های کاربری پنل</div>
                </div>
            </div>
        </div>
        <div class="col-6 col-lg-3">
            <div class="card stat-card border-0 h-100">
                <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="stat-label text-muted small">کاربران فعال</span>
                        <span class="stat-icon bg-warning-subtle text-warning">
                            <i class="fas fa-user-check"></i>
                        </span>
                    </div>
                    <div class="stat-value text-white fs-3 fw-semibold">{{ active_users }}</div>
                    <div class="mt-auto small text-muted">کاربرانی که دسترسی فعلی دارند</div>
                </div>
            </div>
        </div>
    </div>

    <div class="card border-0 glass-card mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2 class="h5 mb-0 text-white d-flex align-items-center gap-2">
                    <i class="fas fa-wrench text-primary"></i>
                    اقدامات سریع
                </h2>
                <span class="text-muted small d-none d-sm-inline">دسترسی سریع به مهم‌ترین بخش‌های مدیریتی</span>
            </div>
            <div class="row g-3 quick-actions">
                <div class="col-6 col-md-3">
                    <a href="{{ url_for('add_server_page') }}" class="btn btn-action w-100">
                        <span class="btn-icon bg-primary-subtle text-primary">
                            <i class="fas fa-server"></i>
                        </span>
                        <span class="btn-text">
                            <span class="title">افزودن سرور</span>
                            <span class="subtitle">تعریف سرور جدید برای مانیتورینگ</span>
                        </span>
                    </a>
                </div>
                <div class="col-6 col-md-3">
                    <a href="{{ url_for('manage_servers') }}" class="btn btn-action w-100">
                        <span class="btn-icon bg-info-subtle text-info">
                            <i class="fas fa-list-check"></i>
                        </span>
                        <span class="btn-text">
                            <span class="title">مدیریت سرورها</span>
                            <span class="subtitle">ویرایش، توقف یا ریست ترافیک</span>
                        </span>
                    </a>
                </div>
                <div class="col-6 col-md-3">
                    <a href="{{ url_for('add_user_page') }}" class="btn btn-action w-100">
                        <span class="btn-icon bg-success-subtle text-success">
                            <i class="fas fa-user-plus"></i>
                        </span>
                        <span class="btn-text">
                            <span class="title">افزودن کاربر</span>
                            <span class="subtitle">ساخت دسترسی جدید برای پنل</span>
                        </span>
                    </a>
                </div>
                <div class="col-6 col-md-3">
                    <a href="{{ url_for('manage_users') }}" class="btn btn-action w-100">
                        <span class="btn-icon bg-warning-subtle text-warning">
                            <i class="fas fa-users-gear"></i>
                        </span>
                        <span class="btn-text">
                            <span class="title">مدیریت کاربران</span>
                            <span class="subtitle">فعال / غیرفعال کردن کاربرها</span>
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex flex-column flex-md-row justify-content-between gap-3">
        <a href="{{ url_for('dashboard') }}" class="btn btn-outline-light flex-fill">
            <i class="fas fa-arrow-left-long me-2"></i>
            بازگشت به داشبورد کاربری
        </a>
        <a href="{{ url_for('logout') }}" class="btn btn-danger flex-fill flex-md-grow-0">
            <i class="fas fa-sign-out-alt me-2"></i>
            خروج از حساب
        </a>
    </div>
</div>
{% endblock %}
